{% extends 'shared/base.html' %}
{% block content %}
    {% if plant.id is not None %}
        <div class="form-container">
        <form class="add-edit-form" action="{% url 'backendapp:plant' plant.id %}" method="POST">
    {% else %}
        <h1 class="page-heading">Add Plant</h1>
        <div class="form-container">
        <form class="add-edit-form" action="{% url 'backendapp:plants' %}" method="post">
        {% comment %} enctype="multipart/form-data" {% endcomment %}
    {% endif %}
        {% csrf_token %}

        <fieldset>
            <div class="form-group">
            <label class="col-form-label" for="img_url">Upload image: </label><br>
            <input id="img_url" class="form-control" type="text" name="img_url" value="{{ plant.img_url }}">
            </div>        
        {% comment %} <input type="file" id="img-url" name="img-url" value="{{ plant.img_url }}" accept="image/*"> {% endcomment %}
        </fieldset>

        <fieldset>
            <div class="form-group">
            <label class="col-form-label" for="name">Name: </label><br>
            <input id="name" class="form-control" type="text" name="name" value="{{ plant.name }}" required>
            </div>
        </fieldset>

        <fieldset>
            <div class="form-group">
            <label class="col-form-label" for="description">Species/Description: </label><br>
            <input id="description" class="form-control" type="text" name="description" value="{{ plant.description }}" required>
            </div>
        </fieldset>

        <fieldset>
            <div class="form-group">
        <p>How often does this plant need to be watered?</p>
            <div class="days-weeks">
            <label class="col-form-label" for="days">Days: </label>
            <input id="days" class="form-control" type="number" name="days" value="{{ plant.days }}">
            <label class="col-form-label" for="weeks">Weeks: </label>
            <input id="weeks" class="form-control" type="number" name="weeks" value="{{ plant.weeks }}">
            </div>
            </div>
        </fieldset>

        <fieldset>
        <div class="form-group">
            <label class="col-form-label" for="plant_type">Plant Type: </label><br>
            <select id="plant_type" class="custom-select" name="plant_type">
                {% for type in plant_types %}
              <option {% if type.id == plant.plant_type_id %}selected{% endif %} value="{{ type.id }}">
                    {{ type.plant_type }}</option>
                {% endfor %} 
            </select>
        </div>
        </fieldset>
        
        <fieldset>
          <div class="form-group">
            <label class="col-form-label" for="notes">Notes: </label><br>
            <input class="form-control" id="notes" type="text" name="notes" value="{{ plant.notes }}" rows="3"></input>
          </div>
        </fieldset>

         {% if plant.id is not None %}
            {% comment %} <section id="book-actions" style="display:flex;">

        <form action="{% url 'backendapp:plant' plant.id %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="actual_method" value="PUT">

            <button>Update</button>
        </form> {% endcomment %}
            <div class="save-cancel-flexbox">        
            <input type="hidden" name="actual_method" value="PUT">
            <input class="btn btn-primary" type="submit" value="Update" />
    </form>
        <form action="{% url 'backendapp:plant' plant.id %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="actual_method" value="DELETE">
            <button onclick="return confirm('Are you sure you want to delete this plant?')" class="btn btn-danger">Delete</button>


            {% comment %} <input type="hidden" name="actual_method2" value="DELETE">
            <input class="btn btn-danger" type="submit" onclick="return confirm('Are you sure you want to delete this plant?')" value="Delete" /> {% endcomment %}
    {% comment %} </div> {% endcomment %}
    {% else %}
        <div class="save-cancel-flexbox">
        <input type="submit" class="btn btn-primary" value="Save">
        {% comment %} <div class="form-container"> {% endcomment %}
        </form>
        <form action="{% url 'backendapp:plants' %}" method="GET">
        {% csrf_token %}
        <button class="btn btn-warning">Cancel</button>
        {% endif %}
        {% comment %} </form> {% endcomment %}
        {% comment %} </div> {% endcomment %}
        </div>

        </form>
        </div>
{% endblock %}